{% extends 'layout.html' %}

{% load static %}

{% block messages %}
{{ block.super }}
{% endblock %}

{% block css %}
{% endblock %}

{% block body %}
<div class="circle--actions--bar">
        <nav class="bounds">
          <ul class="circle--pill--list">
            <li><a href="applications.html">Applications</a></li>
            <li><a class="selected" href="profile.html">Profile</a></li>
          </ul>
        </nav>
      </div>
    
      <div class="bounds circle--page">
        <div class="circle--page--header circle--fluid">
          <div class="circle--fluid--cell circle--fluid--primary">
            <h2>Profile</h2>
          </div>
          <div class="circle--fluid--cell circle--fluid--secondary">
              {% if user.id == user_profile.id %}
            <a class="button icon-on-left" href="{% url 'accounts:updateuser' pk=user.id %}">Edit</a>
                {% endif %}
          </div>
        </div>
    
        <div class="grid-70">
          <h1>{{ user_profile }}</h1>
          <div class="circle--article--body">
            <p>{{ user_profile.about }}</p>
          </div>
    
          <h2>Past Projects</h2>
          <table class="u-full-width circle--table">
            <thead>
              <tr>
                <th>Project Title</th>
                <th>Position</th>
                <th class="circle--cell--right">Project Needs</th>
              </tr>
            </thead>
            <tbody>
                
                {% for application in applications %}
              <tr class="clickable-row" data-href="project.html">
                <td>
                  <h3>{{ application.position.project.title }}</h3>
                </td>
                <td class="circle--cell--right">
                    {{ application.position.title }}
                </td>
                <td class="circle--cell--right">
                    {% for skill in application.position.skills.all %}
                  <span class="secondary-label">{{ skill }},</span>
                    {% endfor %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
    
        <div class="grid-25 grid-push-5">
    
          <div class="circle--secondary--module">
            <div class="circle--primary--avatar">
                    {% if user_profile.avatar %}
                    <img src="{{ user_profile.avatar.url }}" class="avatar-photo">
                    {% endif %}
            </div>
          </div>
    
          <div class="circle--secondary--module">
            <h4>My Skills</h4>
            <ul class="unloaded">
                {% for skill in user_profile.skills.all %}
              <li>{{ skill }}</li>
                {% endfor %}
            </ul>
          </div>
    
          <div class="circle--secondary--module">
            <h4>My Projects</h4>
            <ul class="circle--link--list">
                {% for project in user_profile.portfolio_projects.all %}
              <li><a>{{ project }}</a></li>
                {% endfor %}
            </ul>
          </div>
        </div>

{% endblock %}

{% block js %}
{% endblock %}